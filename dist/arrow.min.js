function App(){}function EmptyFn(){}App.model.CurrentLocation=new App.model.LocationModel({fields:["accuracy"],getters:{accuracy:function(a){return a.toFixed(0)}},defaultValues:{accuracy:0}}),App.model.CurrentLocation.beforeUpdate=function(a){this.setValue("accuracy",a.accuracy,!0)},App.model.DestinationLocation=new App.model.LocationModel({fields:["bearing"]}),App.controller.MainController=new Class(App.controller.Controller),App.controller.MainController.extend({destinationLocationModel:null,initialize:function(a){var b=this;a=a||{};var c=b.parseQueryString();b.destinationLocationModel=a.destinationLocationModel||b.destinationLocationModel,"lat"in c&&"lng"in c?b.setDestinationLocationModel(Number(c.lat),Number(c.lng),Number(c.alt||0)):b.setDestinationLocationModel(54.403041,18.590118,5),App.controller.MainController._parent.initialize.call(this,a)},setDestinationLocationModel:function(a,b,c){var d=this;d.destinationLocationModel.setCoords({latitude:a,longitude:b,altitude:c})},parseQueryString:function(){var a=window.location.search,b={};return a.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(a,c,d,e){b[c]=e}),b}}),App.controller.MainController=new App.controller.MainController({destinationLocationModel:App.model.DestinationLocation}),App.controller.GPSController=new App.controller.GPSController({destinationLocationModel:App.model.DestinationLocation,currentLocationModel:App.model.CurrentLocation}),App.Base=new Class({initialize:function(a){a=a||{};var b;this.afterInit=a.afterInit||EmptyFn;for(b in a)this[b]=a[b];this.afterInit.call(this)}}),App.Observable={addEvent:function(a){this.events||(this.events={}),this.events[a]=this.events[a]||[]},addEventListener:function(a,b,c){var d=c||this;return this.events[a].push({fn:b,scope:d}),this},removeEventListener:function(a,b){var c,d;if(this.events.hasOwnProperty(a))for(d=this.events[a],c=d.length-1;--c;)d[c].fn===b&&array.splice(c,1);return this},fireEvent:function(a){var b=this,c=!0;return this.events[a].forEach(function(a){a.hasOwnProperty("fn")?a.fn.call(a.scope,b)===!1&&(c=!1):a.call(b,b)===!1&&(c=!1)}),c}};